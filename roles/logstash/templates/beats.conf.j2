input {
  beats {
    port => {{ item.input_port }}
  }
}

output {
  elasticsearch {
    hosts => [ "{{ groups['elastic_hosts']|join('", "')}}" ]
    index => "{{ item.output_index }}"
    ecs_compatibility => v1
    ssl => true
    ssl_certificate_verification => false
    cacert => "/usr/share/logstash/certs/ca.crt"
    user => "{{ item.output_user }}"
    password => "{{ item.output_password }}"
  }
}
